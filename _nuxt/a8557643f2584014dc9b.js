(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1390:function(e,t,r){"use strict";r.r(t);var o=r(8),n={layout:"auth",head:{title:"Entrar"},data:function(){return{showPassword:!1,classLabel:"mb-1 block text-grey-darker text-xs",classInput:"appearance-none focus:outline-none transition focus:shadow-lg w-full rounded py-2 px-3 text-sm text-grey-dark",user:{email:"",password:"",avatar:""},loading:!1}},watch:{"user.email":function(e){var t=this;e.indexOf("@")&&o.c.firestore().collection("users").where("email","==",e).get().then(function(e){if(!e.empty){var r=[];e.forEach(function(e){r.push(e.data())}),t.user.avatar=r[0].photoURL}})}},methods:{submitForm:function(){var e=this;event.preventDefault(),this.loading=!0;var t=this.user,r=t.email,o=t.password;this.$store.dispatch("login",{email:r,password:o}).then(function(){e.$store.commit("notification",{type:"info",message:"Conectado!"}),e.$router.push({name:"index"}),e.loading=!1}).catch(function(t){e.loading=!1,e.$store.commit("notification",{type:"error",message:t.message})})},toggleShowPassword:function(){this.showPassword=!this.showPassword,this.$refs.password.focus()},recover:function(){var e=this;if(!this.user.email)return this.$store.commit("notification",{type:"warning",message:"Informe o email usado no cadastro"}),!1;this.$store.dispatch("resetPassword",this.user.email).then(function(){e.$store.commit("notification",{type:"info",message:"Email de redefinição enviado"})}).catch(function(t){e.$store.commit("notification",{type:"error",message:t.message})})}}},l=r(11),component=Object(l.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"relative min-h-screen overflow-hidden flex flex-col items-center z-0 justify-center bg-grey bg-cover px-5",style:{backgroundImage:"url(https://images.unsplash.com/photo-1493997575474-58d1db687da3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80)"},on:{submit:e.submitForm}},[r("div",{staticClass:"absolute pin-t pin-r pin-b pin-l bg-black opacity-75 z-0"}),e._v(" "),r("div",{staticClass:"flex justify-center items-center flex-col animated fadeIn p-10 w-full max-w-xs bg-grey-light rounded z-10 shadow border"},[r("div",{staticClass:"w-32 h-32 bg-white rounded mb-10"},[e.user.avatar?r("div",{staticClass:"w-32 h-32 rounded shadow-lg bg-cover",style:{backgroundImage:"url("+e.user.avatar+")"},attrs:{"aria-label":e.user.username}}):e._e()]),e._v(" "),r("div",{staticClass:"w-full"},[r("label",{class:e.classLabel,attrs:{for:"form-email"}},[e._v("E-mail")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],class:e.classInput,attrs:{id:"form-email",type:"email",spellcheck:"false",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"w-full mt-5 relative"},[r("label",{class:e.classLabel,attrs:{for:"form-password"}},[e._v("Senha")]),e._v(" "),"checkbox"==(e.showPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",staticClass:"pr-8",class:e.classInput,attrs:{id:"form-password",required:"",type:"checkbox"},domProps:{checked:Array.isArray(e.user.password)?e._i(e.user.password,null)>-1:e.user.password},on:{change:function(t){var r=e.user.password,o=t.target,n=!!o.checked;if(Array.isArray(r)){var l=e._i(r,null);o.checked?l<0&&e.$set(e.user,"password",r.concat([null])):l>-1&&e.$set(e.user,"password",r.slice(0,l).concat(r.slice(l+1)))}else e.$set(e.user,"password",n)}}}):"radio"==(e.showPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",staticClass:"pr-8",class:e.classInput,attrs:{id:"form-password",required:"",type:"radio"},domProps:{checked:e._q(e.user.password,null)},on:{change:function(t){return e.$set(e.user,"password",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",staticClass:"pr-8",class:e.classInput,attrs:{id:"form-password",required:"",type:e.showPassword?"text":"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),e._v(" "),r("button",{staticClass:"absolute pin-t pin-r pin-b mt-4 mr-1 px-2 text-sm text-grey-dark flex items-center focus:outline-none",attrs:{type:"button"},on:{click:e.toggleShowPassword}},[r("i",{staticClass:"fa",class:e.showPassword?"fa-eye":"fa-eye-slash"})])]),e._v(" "),r("div",{staticClass:"mt-5 w-full"},[r("button",{staticClass:"text-sm",attrs:{type:"button"},on:{click:e.recover}},[e._v("\n        Recuperar conta\n      ")])])]),e._v(" "),r("div",{staticClass:"w-full flex items-center justify-between max-w-xs mt-3 z-10 rounded shadow bg-grey-lighter p-5"},[r("nuxt-link",{staticClass:"group inline-block font-bold text-sm text-blue hover:text-black transition no-underline",attrs:{to:{name:"criar-conta"}}},[e._v("\n      Não tem conta?\n      "),r("span",{staticClass:"block text-xs text-grey-darker mt-1 group-hover:text-black"},[e._v("Crie para fazer login")])]),e._v(" "),e.loading?r("button",{staticClass:"no-underline select-none pointer-events-none shadow bg-grey-darker text-white text-sm py-2 px-4 rounded",attrs:{type:"submit"}},[r("i",{staticClass:"fa fa-spinner fa-spin"})]):r("button",{staticClass:"transition no-underline select-none shadow bg-grey-darker hover:bg-black focus:outline-none text-white text-sm py-2 px-4 rounded",attrs:{type:"submit"}},[e._v("\n      Entrar\n    ")])],1)])},[],!1,null,null,null);t.default=component.exports}}]);