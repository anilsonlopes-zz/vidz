(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1375:function(t,e,r){"use strict";var n=r(13),o=r(1376)(5),l=!0;"find"in[]&&Array(1).find(function(){l=!1}),n(n.P+n.F*l,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(121)("find")},1376:function(t,e,r){var n=r(44),o=r(119),l=r(55),c=r(37),d=r(1377);t.exports=function(t,e){var r=1==t,f=2==t,h=3==t,v=4==t,m=6==t,y=5==t||m,_=e||d;return function(e,d,x){for(var w,k,C=l(e),I=o(C),j=n(d,x,3),$=c(I.length),L=0,A=r?_(e,$):f?_(e,0):void 0;$>L;L++)if((y||L in I)&&(k=j(w=I[L],L,C),t))if(r)A[L]=k;else if(k)switch(t){case 3:return!0;case 5:return w;case 6:return L;case 2:A.push(w)}else if(v)return!1;return m?-1:h||v?v:A}}},1377:function(t,e,r){var n=r(1378);t.exports=function(t,e){return new(n(t))(e)}},1378:function(t,e,r){var n=r(18),o=r(169),l=r(3)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&null===(e=e[l])&&(e=void 0)),void 0===e?Array:e}},1385:function(t,e,r){"use strict";r.r(e);r(1375),r(168),r(43),r(26),r(84),r(89);var n=r(22),o=r(8),l=r(155),c=r(90),d=function t(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.a)(this,t),this.data={id:data.id||c.random.uuid(),postId:data.postId,userId:data.userId,slug:data.slug,added:(new Date).getTime()}},f=r(85),h={layout:"tube",head:function(){return{title:this.post.title,titleTemplate:"vidz - %s"}},data:function(){return{post:{},librariesPublic:[{slug:"watched",label:"Assistidos",icon:"fa-eye",count:"",have:!1},{slug:"liked",label:"Favoritos",icon:"fa-heart-o",count:"",have:!1},{slug:"watch-later",label:"Assistir depois",icon:"fa-clock-o",count:"",have:!1}],sections:[]}},computed:Object(n.a)({},Object(f.b)(["auth"])),mounted:function(){var t=this;this.$route.params.slug||this.$router.replace("/404"),o.b.collection("posts").where("slug","==",this.$route.params.slug).get().then(function(e){if(e.empty)t.$router.replace("/404");else{var r=Object(o.d)(e)[0],n=Object.keys(r.search.genres).map(function(t){return{title:t.trim(),query:["search.genres.".concat(t),"==",!0]}});t.post=r,t.sections=n}t.fetchLibraries()})},methods:{toggleLibrary:function(t){var e=this;t.have?o.b.collection("libraries").doc("".concat(this.auth.uid,"_").concat(t.slug,"_").concat(this.post.id)).delete().then(function(){e.$store.commit("notification",{message:"".concat(t.label," -1"),type:"default"})}):this.addLibrary(t)},addLibrary:function(t){var e=this;try{var r=new d({id:"".concat(this.auth.uid,"_").concat(t.slug,"_").concat(this.post.id),userId:this.auth.uid,postId:this.post.id,slug:t.slug});o.b.collection("libraries").doc(r.data.id).set(r.data,{merge:!0}).then(function(){e.$store.commit("notification",{message:"".concat(t.label," +1"),type:"success"})})}catch(t){this.$store.commit("notification",{message:"Tente novamente. Se não funcionar, fala com a gente.",type:"error"})}},fetchLibraries:function(){var t=this;this.librariesPublic.map(function(e){var r=o.b.collection("libraries");(r=(r=r.where("postId","==",t.post.id)).where("slug","==",e.slug)).get().then(function(r){t.librariesPublic.find(function(t){return t.slug===e.slug}).count=r.size,t.userHaveThisLibrary(e.slug)})})},userHaveThisLibrary:function(t){var e=this;o.b.collection("libraries").where("slug","==",t).where("postId","==",this.post.id).where("userId","==",this.auth.uid).onSnapshot(function(r){e.librariesPublic.find(function(e){return e.slug===t}).have=!r.empty})}}},v=r(11),component=Object(v.a)(h,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"select-none py-4 px-2 min-h-screen md:min-h-0",attrs:{"aria-label":"Informações do post"}},[r("div",{staticClass:"w-full flex",attrs:{id:"poster_libraries"}},[r("nf-poster",{attrs:{src:t.post.poster}}),t._v(" "),t.auth?r("div",{staticClass:"w-full h-64 flex flex-col justify-between ml-4",attrs:{id:"libraries"}},[t._l(t.librariesPublic,function(e,n){return r("button",{key:n,staticClass:"py-5 w-full mb-2 flex items-center justify-center text-sm animated bounceInRight fast transition rounded-lg focus:outline-none",class:e.have?"bg-grey-darker text-black":"bg-grey-darkest text-grey-dark",style:{"animation-delay":n+"00ms"},attrs:{title:e.label,type:"button"},on:{click:function(r){return t.toggleLibrary(e)}}},[r("i",{staticClass:"fa",class:""+e.icon}),t._v(" "),e.count>10?r("span",{staticClass:"font-mono ml-2"},[t._v("\n            "+t._s(e.count)+"\n          ")]):t._e()])}),t._v(" "),t._m(0)],2):t._e()],1),t._v(" "),r("div",{staticClass:"w-full fadeIn fast"},[r("div",{attrs:{id:"title_year_type_seasons_plot"}},[r("h1",{staticClass:"py-2 text-grey-light font-thin font-serif",class:{"state-loading rounded-lg mt-4 w-full h-10":!t.post.title},attrs:{"aria-label":"Título do post"}},[t._v("\n          "+t._s(t.post.title)+"\n        ")]),t._v(" "),r("div",{staticClass:"flex uppercase font-mono text-xxs text-grey mt-2",attrs:{id:"year_type_seasons"}},[r("div",{staticClass:"rounded px-4 py-1 mb-2 mr-3 bg-grey-darker",attrs:{"aria-label":"Ano de lançamento"}},[t._v("\n            "+t._s(t.post.year)+"\n          ")]),t._v(" "),r("div",{staticClass:"rounded px-4 py-1 mb-2 mr-3 bg-grey-darker",attrs:{"aria-label":"Tipo do post"}},[t._v("\n            "+t._s(t.post.type)+"\n          ")]),t._v(" "),"series"==t.post.type?r("div",{staticClass:"rounded px-4 py-1 mb-2 mr-3 bg-grey-darker",attrs:{"aria-label":"Número de temporadas"}},[t._v("\n            "+t._s(t.post.totalseasons)+" temporada"+t._s(t.post.totalseasons>1?"s":"")+"\n          ")]):t._e()]),t._v(" "),r("div",{staticClass:"sm:block max-w-sm text-grey pt-2",class:{"state-loading bg-grey-dark w-full h-32":!t.post.plot},attrs:{id:"plot","aria-label":"Descrição do post"}},[t._v("\n          "+t._s(t.post.plot)+"\n        ")])]),t._v(" "),t.post.genres?r("div",{staticClass:"pt-4 text-xs text-grey",class:{"border-t-8 border-white w-full h-10 bg-grey-lighter":!t.post.actors},attrs:{id:"genres"}},t._l(t.post.genres.split(","),function(e,n){return r("span",{key:n,staticClass:"inline-block border border-grey-light rounded py-2 px-2 mr-2 mb-2"},[t._v("\n          "+t._s(e.trim())+"\n        ")])}),0):t._e()])]),t._v(" "),r("div",{staticClass:"pt-5"},t._l(t.sections,function(section,e){return r("nf-section",{key:e,attrs:{title:t._f("capitalize")(section.title),query:section.query,transition:!0}})}),1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"animated fadeIn py-5 w-full flex items-center justify-center text-sm bg-grey text-black transition rounded-lg focus:outline-none"},[e("i",{staticClass:"fa fa-play"})])}],!1,null,null,null);e.default=component.exports}}]);